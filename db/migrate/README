Rules for migrations in MOVEX CDC
=================================

- One migration file should contain only one atomic operation, not more. Because Oracle doesn't have transactional DDL.
- foreign key names should always be lower case
- index names should always be upper case
- Remove schema.rb after changes on migrations to get all changes
  Initial migrations is executed based on schema.rb if it exists, not on the migration files.
- Resset the schema to empty before test migrations:


```
SELECT COUNT(*) FROm User_Tables;

BEGIN
  FOR Rec IN (SELECT * FROm User_Tables) LOOP
    BEGIN
      EXECUTE IMMEDIATE 'DROP Table '||Rec.Table_Name;
    EXCEPTION
      WHEN OTHERS THEN
      NULL;
    END;
  END LOOP;

  FOR Rec IN (SELECT * FROm User_Sequences) LOOP
    BEGIN
      EXECUTE IMMEDIATE 'DROP Sequence '||Rec.Sequence_Name;
    EXCEPTION
      WHEN OTHERS THEN
      NULL;
    END;
  END LOOP;

  FOR Rec IN (SELECT * FROm User_Views) LOOP
    BEGIN
      EXECUTE IMMEDIATE 'DROP View '||Rec.View_Name;
    EXCEPTION
      WHEN OTHERS THEN
      NULL;
    END;
  END LOOP;

  FOR Rec IN (SELECT * FROm User_Types) LOOP
    BEGIN
      EXECUTE IMMEDIATE 'DROP Type '||Rec.Type_Name;
    EXCEPTION
      WHEN OTHERS THEN
      NULL;
    END;
  END LOOP;

  FOR Rec IN (SELECT * FROm User_Synonyms) LOOP
    BEGIN
      EXECUTE IMMEDIATE 'DROP Synonym '||Rec.Synonym_Name;
    EXCEPTION
      WHEN OTHERS THEN
      NULL;
    END;
  END LOOP;

END;
/
```